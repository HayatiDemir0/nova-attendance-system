{% extends 'base.html' %}
{% block title %}Sistem Ayarları - Admin Paneli{% endblock %}
{% block content %}

<div style="background: linear-gradient(135deg, #607D8B 0%, #546E7A 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
    <h1><i class="ti ti-settings me-3"></i>Sistem Ayarları</h1>
    <p class="mb-0">Sistem yönetimi ve bakım işlemleri</p>
</div>

<div class="card mb-4" style="border-left: 4px solid #7B3F9D;">
    <div class="card-header" style="background: linear-gradient(135deg, #7B3F9D 0%, #E91E63 100%); color: white;">
        <h3 class="mb-0"><i class="ti ti-info-circle me-2"></i>Sistem Bilgileri</h3>
    </div>
    <div class="card-body">
        <div class="row text-center">
            <div class="col-md-4"><div class="p-3 border rounded"><h2 class="text-primary">{{ toplam_yoklama }}</h2><small>Toplam Yoklama</small></div></div>
            <div class="col-md-4"><div class="p-3 border rounded"><h2 class="text-success">{{ siniflar.count }}</h2><small>Aktif Sınıf</small></div></div>
            <div class="col-md-4"><div class="p-3 border rounded">{% if en_eski_yoklama %}<h5 class="text-info">{{ en_eski_yoklama.tarih|date:"d.m.Y" }}</h5>{% else %}<h5 class="text-muted">-</h5>{% endif %}<small>En Eski Yoklama</small></div></div>
        </div>
    </div>
</div>

<div class="card mb-4" style="border-left: 4px solid #FF9800;">
    <div class="card-header bg-warning text-dark">
        <h3 class="mb-0"><i class="ti ti-database me-2"></i>Veritabanı Yönetimi</h3>
    </div>
    <div class="card-body">
        <h5>Eski Yoklamaları Temizle</h5>
        <p class="text-muted">Belirtilen tarihten önceki tüm yoklamalar silinecek. <strong>Bu işlem geri alınamaz!</strong></p>
        <form method="post" onsubmit="return confirm('EMİN MİSİNİZ? Bu işlem geri alınamaz!');">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-md-4"><input type="date" name="tarih" class="form-control" required></div>
                <div class="col-md-4"><button type="submit" name="temizle_eski_yoklamalar" class="btn btn-warning w-100"><i class="ti ti-trash me-2"></i>Temizle</button></div>
            </div>
        </form>
    </div>
</div>

<div class="card" style="border-left: 4px solid #dc3545;">
    <div class="card-header" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white;">
        <h3 class="mb-0"><i class="ti ti-alert-triangle me-2"></i>Tehlikeli Bölge</h3>
    </div>
    <div class="card-body">
        <div class="alert alert-danger"><i class="ti ti-alert-circle me-2"></i><strong>Uyarı!</strong> Aşağıdaki işlemler geri alınamaz!</div>
        <button class="btn btn-danger" disabled><i class="ti ti-trash me-2"></i>Tümünü Sil (Devre Dışı)</button>
    </div>
</div>

<div class="mt-3"><a href="{% url 'yonetim_panel' %}" class="btn btn-outline-secondary btn-lg"><i class="ti ti-arrow-left me-2"></i>Geri</a></div>

{% endblock %}